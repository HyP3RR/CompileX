# Variables
LEXER      = src/lexer.l         # Lex file in src directory
LEXER_OUT  = src/lex.yy.c        # Output C file generated by flex
EXECUTABLE = lexer               # Name of the final executable
CC         = gcc

# Default target: build the executable
all: $(EXECUTABLE)

# Generate the C source from the lex file using flex.
# We force flex to output the file in the src directory using the -o option.
$(LEXER_OUT): $(LEXER)
	@echo "Running flex on $(LEXER)..."
	flex -o $(LEXER_OUT) $(LEXER)

# Compile the generated C file into an executable.
$(EXECUTABLE): $(LEXER_OUT)
	@echo "Compiling $(LEXER_OUT) into executable $(EXECUTABLE)..."
	$(CC)  $(LEXER_OUT) -o $(EXECUTABLE) -lfl

# Clean up generated files
clean:
	@echo "Cleaning up..."
	rm -f $(LEXER_OUT) $(EXECUTABLE)

.PHONY: all clean
